{"version":3,"file":"3dily.js","sources":["../build/esm/Controller.js","../build/esm/Scene.js","../build/esm/index.js"],"sourcesContent":["var Controller = /** @class */ (function () {\n    function Controller(element, framesCount, onChangeFrame) {\n        this.pointerPosition = { x: 0, y: 0 };\n        this.pointerIsDown = false;\n        this.moved = false;\n        this.activeIndex = 0;\n        this.element = element;\n        this.framesCount = framesCount;\n        this.onChangeFrame = onChangeFrame;\n        this.init();\n    }\n    Controller.prototype.init = function () {\n        var _this = this;\n        this.element.onpointerdown = function (e) {\n            _this.pointerPosition = { x: e.clientX, y: e.clientY };\n            _this.pointerIsDown = true;\n        };\n        this.element.onpointermove = function (e) {\n            if (!_this.pointerIsDown /* || zoomIsEnable */)\n                return;\n            var deltaX = _this.pointerPosition.x - e.clientX;\n            if (Math.abs(deltaX) < 3)\n                return;\n            var index = deltaX < 0 ? _this.activeIndex - 1 : _this.activeIndex + 1;\n            _this.activeIndex =\n                index > _this.framesCount - 1\n                    ? 0\n                    : index < 0\n                        ? _this.framesCount - 1\n                        : index;\n            _this.onChangeFrame(_this.activeIndex);\n            _this.pointerPosition = { x: e.clientX, y: e.clientY };\n        };\n        this.element.onpointerup = function () {\n            _this.pointerIsDown = false;\n        };\n    };\n    return Controller;\n}());\nexport { Controller };\n","import { Controller } from './Controller.js';\nvar API_URL = 'https://dev.api.3dily.com/scene/';\nvar Scene = /** @class */ (function () {\n    function Scene(opts) {\n        var _this = this;\n        this.framesCount = 0;\n        this.activeFrame = 0;\n        this.frameElements = [];\n        this.onChangeFrame = function (i) {\n            _this.frameElements[_this.activeFrame].classList.remove('_3dily-frame-active');\n            _this.frameElements[i].classList.add('_3dily-frame-active');\n            _this.activeFrame = i;\n        };\n        this.opts = opts;\n        this.init();\n    }\n    Scene.prototype.init = function () {\n        this.container = document.getElementById(this.opts.containerId);\n        if (!this.container) {\n            console.error('Container not found');\n            return;\n        }\n        this.wrapper = document.createElement('div');\n        this.wrapper.classList.add('_3dily-scene');\n        this.container.appendChild(this.wrapper);\n        this.baseUrl = API_URL + this.opts.panelId + '/' + this.opts.productCode;\n        this.setupScene();\n    };\n    Scene.prototype.setupScene = function () {\n        var _this = this;\n        fetch(\"\".concat(this.baseUrl, \"/data\"))\n            .then(function (res) { return res.json(); })\n            .then(function (data) {\n            _this.framesCount = data.files[0].frames.length;\n            _this.controller = new Controller(_this.wrapper, _this.framesCount, _this.onChangeFrame);\n            for (var i = 0; i < _this.framesCount; i++) {\n                var img = document.createElement('img');\n                img.classList.add('_3dily-frame');\n                i === _this.activeFrame && img.classList.add('_3dily-frame-active');\n                img.src = \"\".concat(_this.baseUrl, \"/image?shadow=true&frame=\").concat(i, \"&quality=2k\");\n                _this.wrapper.appendChild(img);\n                _this.frameElements.push(img);\n            }\n        });\n    };\n    return Scene;\n}());\nexport { Scene };\n","import { Scene as _Scene } from './Scene.js';\nfunction Scene(opts) {\n    var Scene = new _Scene(opts);\n    return Scene;\n}\nexport { Scene };\n"],"names":["Scene","_Scene"],"mappings":"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"}
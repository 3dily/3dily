/*!
 * 3DILY v1.0.0
 * (c) 2021-2022 Kamran Mokhtari
 */
var t=function(){function t(t,e,n){this.pointerPosition={x:0,y:0},this.pointerIsDown=!1,this.moved=!1,this.activeIndex=0,this.element=t,this.framesCount=e,this.onChangeFrame=n,this.init()}return t.prototype.init=function(){var t=this;this.element.onpointerdown=function(e){t.pointerPosition={x:e.clientX,y:e.clientY},t.pointerIsDown=!0},this.element.onpointermove=function(e){if(t.pointerIsDown){var n=t.pointerPosition.x-e.clientX;if(!(Math.abs(n)<3)){var i=n<0?t.activeIndex-1:t.activeIndex+1;t.activeIndex=i>t.framesCount-1?0:i<0?t.framesCount-1:i,t.onChangeFrame(t.activeIndex),t.pointerPosition={x:e.clientX,y:e.clientY}}}},this.element.onpointerup=function(){t.pointerIsDown=!1}},t}(),e=function(){function e(t){var e=this;this.framesCount=0,this.activeFrame=0,this.frameElements=[],this.onChangeFrame=function(t){e.frameElements[e.activeFrame].classList.remove("_3dily-frame-active"),e.frameElements[t].classList.add("_3dily-frame-active"),e.activeFrame=t},this.opts=t,this.init()}return e.prototype.init=function(){this.container=document.getElementById(this.opts.containerId),this.container?(this.wrapper=document.createElement("div"),this.wrapper.classList.add("_3dily-scene"),this.container.appendChild(this.wrapper),this.baseUrl="https://dev.api.3dily.com/scene/"+this.opts.panelId+"/"+this.opts.productCode,this.setupScene()):console.error("Container not found")},e.prototype.setupScene=function(){var e=this;fetch("".concat(this.baseUrl,"/data")).then((function(t){return t.json()})).then((function(n){e.framesCount=n.files[0].frames.length,e.controller=new t(e.wrapper,e.framesCount,e.onChangeFrame);for(var i=0;i<e.framesCount;i++){var o=document.createElement("img");o.classList.add("_3dily-frame"),i===e.activeFrame&&o.classList.add("_3dily-frame-active"),o.src="".concat(e.baseUrl,"/image?shadow=true&frame=").concat(i,"&quality=2k"),e.wrapper.appendChild(o),e.frameElements.push(o)}}))},e}();function n(t){return new e(t)}export{n as Scene};
//# sourceMappingURL=3dily.esm.min.js.map

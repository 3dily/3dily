/*!
 * 3DILY v1.0.0
 * (c) 2021-2022 Kamran Mokhtari
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Scene=t()}(this,(function(){"use strict";var e=function(){function e(e,t,n){this.pointerPosition={x:0,y:0},this.pointerIsDown=!1,this.moved=!1,this.activeIndex=0,this.element=e,this.framesCount=t,this.onChangeFrame=n,this.init()}return e.prototype.init=function(){var e=this;this.element.onpointerdown=function(t){e.pointerPosition={x:t.clientX,y:t.clientY},e.pointerIsDown=!0},this.element.onpointermove=function(t){if(e.pointerIsDown){var n=e.pointerPosition.x-t.clientX;if(!(Math.abs(n)<3)){var i=n<0?e.activeIndex-1:e.activeIndex+1;e.activeIndex=i>e.framesCount-1?0:i<0?e.framesCount-1:i,e.onChangeFrame(e.activeIndex),e.pointerPosition={x:t.clientX,y:t.clientY}}}},this.element.onpointerup=function(){e.pointerIsDown=!1}},e}(),t=function(){function t(e){var t=this;this.framesCount=0,this.activeFrame=0,this.frameElements=[],this.onChangeFrame=function(e){t.frameElements[t.activeFrame].classList.remove("_3dily-frame-active"),t.frameElements[e].classList.add("_3dily-frame-active"),t.activeFrame=e},this.opts=e,this.init()}return t.prototype.init=function(){this.container=document.getElementById(this.opts.containerId),this.container?(this.wrapper=document.createElement("div"),this.wrapper.classList.add("_3dily-scene"),this.container.appendChild(this.wrapper),this.baseUrl="https://dev.api.3dily.com/scene/"+this.opts.panelId+"/"+this.opts.productCode,this.setupScene()):console.error("Container not found")},t.prototype.setupScene=function(){var t=this;fetch("".concat(this.baseUrl,"/data")).then((function(e){return e.json()})).then((function(n){t.framesCount=n.files[0].frames.length,t.controller=new e(t.wrapper,t.framesCount,t.onChangeFrame);for(var i=0;i<t.framesCount;i++){var o=document.createElement("img");o.classList.add("_3dily-frame"),i===t.activeFrame&&o.classList.add("_3dily-frame-active"),o.src="".concat(t.baseUrl,"/image?shadow=true&frame=").concat(i,"&quality=2k"),t.wrapper.appendChild(o),t.frameElements.push(o)}}))},t}();return function(e){return new t(e)}}));
//# sourceMappingURL=3dily.min.js.map
